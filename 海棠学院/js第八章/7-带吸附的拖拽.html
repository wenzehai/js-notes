<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			#box{
				width: 200px;
				height: 200px;
				background: green;
				position: absolute;
				top: 0;
				left: 0;
			}
			img {
				position: absolute;
				top: 0;
				left: 0;
			}
		</style>
		<script type="text/javascript">
			/*
			 *如果有重复，就封装一个函数
			 * 
			 * 
			 * 
			 * 
			 * 
			 * 
			 */
			window.onload = function(){
				var box = document.getElementById('box');
				var img = document.getElementById('img');
				drag(img);
				drag(box);
				
				function drag(obj){
					//鼠标按下
					obj.onmousedown = function(ev){
						var disX = ev.clientX - obj.offsetLeft;
						var disY = ev.clientY - obj.offsetTop;
				
						//鼠标移动
						document.onmousemove = function(ev){
							var l = ev.clientX -disX;
							var t = ev.clientY -disY;
							
							if(l<30){
								l=0;
							} else if(l>(document.documentElement.clientWidth-obj.offsetWidth)-30){
								l = document.documentElement.clientWidth-obj.offsetWidth;
							}
							
							if(t<30){
								t=0;
							} else if(t>(document.documentElement.clientHeight-obj.offsetHeight)-30){
								t = document.documentElement.clientHeight-obj.offsetHeight;
							}
							
							obj.style.left = l +'px';
							obj.style.top = t +'px';
						}
					
						//鼠标抬起
						document.onmouseup = function(){
							document.onmousemove = null;
						};
					
						//阻止默认文字选中
						return false;
					
					};
					
				};
				
				
			}
		</script>
	</head>
	<body>
		<p>wenzehai</p>
		<div id="box"></div>
		<img src="img/3.jpg" id="img"/>
	</body>
</html>
